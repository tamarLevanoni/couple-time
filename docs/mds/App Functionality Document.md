# מסמך פונקציונליות אפליקציה - מערכת ניהול השאלות משחקי זוגיות  

## 1. ניהול משתמשים והרשאות  
### 1.1 הרשאות לפי תפקיד  
- **רכז מוקד**:  
  - גישה לנתוני המוקד שלו בלבד (מתואם עם PRD סעיף 2.1).  
  - יכולת לעדכן סטטוסי השאלות, לרשום החזרות, ולסמן איחורים.  
  - צפייה בדוחות מוקדיים: היסטוריית השאלות, משחקים באיחור, והחזרות צפויות.  
  - קבלת התראות WhatsApp על איחורים והחזרות (מתואם עם מסמך זרימה סעיף 7).  

- **מנהל מערכת**:  
  - גישה מלאה לכל הנתונים בכל המוקדים.  
  - ניהול משתמשים: הוספה, עריכה, ומחיקה של רכזים ומנהלים.  
  - הגדרת מוקדים חדשים ועדכון פרטי מוקדים קיימים.  
  - הפקת דוחות כלל-מערכתיים: השוואת פעילות מוקדים, ניתוח פופולריות משחקים, ומעקב אחר איחורים.  

### 1.2 אבטחה  
- הזדהות דו-שלבית באמצעות Google (מתואם עם PRD סעיף 3.1).  
- הצפנת AES-256 לפרטים רגישים (טלפון, אימייל, כתובות).  
- תיעוד פעולות במערכת (לוגים) עם פירוט: משתמש, פעולה, תאריך, ומוקד.  
- הגבלת גישה לפי IP לחשבונות מנהל מערכת.  

## 2. ניהול השאלות  
### 2.1 יצירת השאלה חדשה  
1. **איתור משתמש**:  
   - חיפוש לפי שם, טלפון, או אימייל (מתואם עם מסמך מבנה סעיף 2.1).  
   - אם המשתמש לא קיים: פתיחת טופס רישום חדש עם שדות חובה (שם, טלפון, אימייל).  

2. **בחירת משחק**:  
   - הצגת רשימת משחקים זמינים במוקד הנוכחי (מתואם עם מסמך זרימה סעיף 2).  
   - אינדיקציה ויזואלית לזמינות: צבע ירוק ל"זמין", אפור ל"מושאל".  
   - אפשרות לסינון לפי קטגוריה (למשל: משחקי קלפים, משחקי לוח).  

3. **קביעת תאריכים**:  
   - תאריך השאלה: ברירת מחדל - התאריך הנוכחי.  
   - תאריך החזרה מתוכנן: ברירת מחדל - 7 ימים מתאריך ההשאלה.  
   - אפשרות לשינוי ידני של התאריכים בלוח שנה אינטראקטיבי (מתואם עם מסמך עיצוב סעיף 3.3).  

4. **הוספת הערות**:  
   - שדה טקסט לא חובה להערות פנימיות (למשל: "הלקוח מעוניין במשחק חלופי אם המבוקש לא זמין").  

### 2.2 מעקב וניהול השאלות  
- **כפתורים דינמיים לפי סטטוס**:  
  - **הוזמן**:  
    - "השאלת משחק" (כחול): פתיחת חלון לבחירת משחק זמין.  
    - "לא רלוונטי" (אפור): ביטול ההזמנה עם אפשרות להוספת הערה.  
  - **מושאל/איחור**:  
    - "הארכה" (כתום): הזנת תאריך החזרה חדש וסיבת הארכה.  
    - "החזרת משחק" (ירוק): רישום תאריך החזרה וסטטוס המשחק.  
  - **הוחזר**:  
    - "שליחת משוב" (סגול): הפקת קישור לטופס משוב אוטומטי למייל/WhatsApp.  

- **סינון מתקדם**:  
  - סינון לפי טווח תאריכים, סטטוס, קטגוריית משחק, או מוקד.  
  - אפשרות לשמירת פילטרים מועדפים למשתמש.  

## 3. ניהול מלאי  
### 3.1 עדכון אוטומטי  
- בעת השאלה: סטטוס המשחק מתעדכן אוטומטית ל"מושאל".  
- בעת החזרה: סטטוס המשחק מתאפס ל"זמין", ומיקומו מעודכן למוקד הנוכחי.  
- התראות אוטומטיות למנהל כאשר מלאי משחק מסוים יורד מתחת ל-3 יחידות.  

### 3.2 תצוגת מלאי  
- **רשימת משחקים**:  
  - עמודות: שם משחק, קטגוריה, סטטוס, מוקד, תאריך החזרה צפוי (אם מושאל).  
  - סינון לפי: סטטוס (זמין/מושאל), קטגוריה, מוקד, או משחקים פגומים.  
- **עדכון ידני**:  
  - סימון משחק כ"פגום" עם תיאור התקלה (למשל: "קופסה קרועה").  
  - מחיקת משחק ממערכת (רק למנהל מערכת).  

## 4. מערכת דוחות  
### 4.1 דוחות בסיסיים  
- **היסטוריית השאלות**:  
  - כולל: שם שואל, משחק, תאריכי השאלה/החזרה, סטטוס.  
  - ייצוא לאקסל/PDF עם אפשרות לבחירת טווח תאריכים.  
- **משחקים פופולריים**:  
  - דירוג לפי כמות ההשאלות בחודש האחרון.  
  - השוואה בין מוקדים.  

### 4.2 דשבורד מנהל  
- **ויזואליזציות**:  
  - גרף עוגה: התפלגות השאלות לפי קטגוריות.  
  - גרף עמודות: השוואת פעילות חודשית בין מוקדים.  
  - התראות בולטות: משחקים פגומים, איחורים חריגים, מוקדים לא פעילים.  

## 5. מערכת התראות  
### 5.1 סוגי התראות  
- **לשואלים**:  
  - תזכורת WhatsApp 24 שעות לפני תאריך החזרה.  
  - הודעת תודה לאחר החזרת משחק + קישור למשוב.  
- **לרכזים**:  
  - התראה על מעבר השאלה לסטטוס "איחור".  
  - תזכורת יומית להחזרות צפויות.  
- **למנהלים**:  
  - דוח שבועי על פעילות המערכת.  
  - התראה על מוקד ללא פעילות מעל 7 ימים.  

### 5.2 הגדרות התראות  
- רכז מוקד יכול לכבות/להפעיל התראות למוקד שלו.  
- מנהל מערכת מגדיר תדירות שליחת דוחות (יומי/שבועי/חודשי).  

